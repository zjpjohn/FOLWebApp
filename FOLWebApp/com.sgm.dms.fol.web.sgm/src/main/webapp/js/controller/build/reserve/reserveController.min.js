/*! web.sgm 2016-09-28 */
FolController.controller("reserveAmountCtrl",["$scope","$rootScope","ReserveService","$state","$timeout","$window",function(a,b,c,d,e,f){a.istableshow=!1,e(function(){var b=$("#datagrid").datagrid("getPager");b.pagination({onSelectPage:function(b,d){a.reserve_amount_data.beginNo=d*(b-1)==0?0:d*(b-1)+1,a.reserve_amount_data.endNo=d*b,$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),c.findReserveAmount(a.reserve_amount_data,"reserve/reserveamount/query",function(a,b){$.messager.progress("close"),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}}),$("#ReserveDeatilWindow").panel({onBeforeOpen:function(){$("#changeAmountDataGrid").attr("class","row-fluid ng-hide"),$("#freezeAmountDataGrid").attr("class","row-fluid ng-hide")}})}),a.findReserveAmount=function(){a.reserve_amount_data={dealerType:folUtil.getComboBoxDataById("dealerType"),reserveType:folUtil.getComboBoxDataById("reserveType"),sapCode:$("#sapCode").val(),beginNo:0,endNo:10},a.istableshow=!0,$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),c.findReserveAmount(a.reserve_amount_data,"reserve/reserveamount/query",function(a,b){$.messager.progress("close"),$("#datagrid").datagrid("loadData",{total:0,rows:[]}),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),c.findCodeTypeNames("reserve/reserveamount/findCodeTypeNames",function(a,c){$.messager.progress("close");var d=["#dealerType"];e(function(){$("#reserveType").combobox("loadData",b.reserveType),$("#reserveType").combobox("select",b.reserveType[0].code);for(var c=0;c<a.length;c++)folUtil.isNull(a)||($(d[c]).combobox("loadData",a[c]),$(d[c]).combobox("select",a[c][0].code))})},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))}),a.exportReserveQueryResult=function(){c.getToken("services/tokens",function(b){return folUtil.isNull(a.reserve_amount_data)?void $.messager.alert("提示","请先查询一次再导出"):($.messager.progress("close"),void f.open("reserve/reserveamount/exportReserveQueryResult?dealerType="+a.reserve_amount_data.dealerType+"&reserveType="+a.reserve_amount_data.reserveType+"&sapCode="+a.reserve_amount_data.sapCode+"&token="+b.token))},function(a){$.messager.progress("close"),console.log(a)})},a.findReconciliationDeatil=function(){var b=$("#datagrid").datagrid("getSelections");return b.length<=0?void $.messager.alert("提示","请选择某条记录再操作"):b.length>1?void $.messager.alert("提示","只能选择一条记录进行操作"):(a.dealer=b[0],$("#deatilSapCode").textbox({value:a.dealer.sapCode}),void $("#ReserveDeatilWindow").window("open"))}}]),FolController.controller("reserveDeatilChangeCtrl",["$scope","$rootScope","$timeout","ReserveService","$q","$window",function(a,b,c,d,e,f){a.istableshow=!1,c(function(){var f=$("#changeAmountDataGrid").datagrid("getPager"),g=e.defer();g.promise;f.pagination({onSelectPage:function(b,c){a.reserve_data.beginNo=c*(b-1)==0?0:c*(b-1)+1,a.reserve_data.endNo=c*b,$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),d.findChangeReserveAmount(a.reserve_data,"reserve/reservedeatilchange/changedeatilreserve/query",function(a,b){$.messager.progress("close"),$("#changeAmountDataGrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT?(console.log(a),$.messager.alert("提示","系统超时或请检查账号状态,如没问题请刷新页面重新操作")):$.messager.alert("提示",a.message)})}});var h=$("#freezeAmountDataGrid").datagrid("getPager");h.pagination({onSelectPage:function(b,c){a.reserve_data.beginNo=c*(b-1)==0?0:c*(b-1)+1,a.reserve_data.endNo=c*b,$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),d.findFreezeReserveAmount(a.reserve_data,"reserve/reservedeatilchange/freezedeatilreserve/query",function(a,b){$.messager.progress("close"),$("#freezeAmountDataGrid").datagrid("loadData",a)},function(a){a.state===STATE.TIMEOUT?($.messager.progress("close"),$.messager.alert("提示","系统超时或请检查账号状态,如没问题请刷新页面重新操作")):$.messager.alert("提示",a.message)})}}),$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),d.findCodeTypeNames("reserve/reservedeatilchange/findCodeTypeNames",function(a,d){$.messager.progress("close");var e=["#dealerType","#businessCode"];c(function(){$("#reserveType").combobox("loadData",b.reserveType),$("#reserveType").combobox("select",b.reserveType[0].code);for(var c=0;c<a.length;c++)folUtil.isNull(a[c])||($(e[c]).combobox("loadData",a[c]),$(e[c]).combobox("select",a[c][0].code))})},function(a){$.messager.progress("close"),folUtil.isNull(a)&&$.messager.alert("提示","系统超时或请检查账号状态,如没问题请刷新页面重新操作")})}),a.findReserveDeatilChange=function(){var b=e.defer(),c=b.promise,f=!1,g=!1;return $("#startTime").datebox("getText")>$("#endTime").datebox("getText")?void $.messager.alert("提示","开始时间不能大于结束时间"):(a.reserve_data={dealerType:folUtil.getComboBoxDataById("dealerType"),reserveType:folUtil.getComboBoxDataById("reserveType"),sapCode:$("#sapCode").val(),businessCode:folUtil.getComboBoxDataById("businessCode"),startTime:$("#startTime").datebox("getValue"),endTime:$("#endTime").datebox("getValue"),beginNo:0,endNo:10},a.istableshow=!0,$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),d.findChangeReserveAmount(a.reserve_data,"reserve/reservedeatilchange/changedeatilreserve/query",function(a,c){$("#changeAmountDataGrid").datagrid("loadData",{total:0,rows:[]}),$("#changeAmountDataGrid").datagrid("loadData",a),f=!0,g&&f&&b.resolve("success")},function(a){a.state===STATE.TIMEOUT?(console.log(a),b.reject("timeout")):b.reject("error")}),d.findFreezeReserveAmount(a.reserve_data,"reserve/reservedeatilchange/freezedeatilreserve/query",function(a,c){$("#freezeAmountDataGrid").datagrid("loadData",{total:0,rows:[]}),$("#freezeAmountDataGrid").datagrid("loadData",a),g=!0,g&&f&&b.resolve("success")},function(a){a.state===STATE.TIMEOUT?b.reject("timeout"):b.reject("error")}),void c.then(function(a){console.log(a),"success"===a&&$.messager.progress("close")},function(a){console.log(a),$.messager.progress("close"),"timeout"==a?$.messager.alert("提示","系统超时或请检查账号状态,如没问题请刷新页面重新操作"):$.messager.alert("提示","系统出错")}))},a.deatilChangeResult=function(){d.getToken("services/tokens",function(b){return folUtil.isNull(a.reserve_data)?void $.messager.alert("提示","请先查询一次再导出"):(f.open("reserve/reservedeatilchange/ChangeReserveAmount?dealerType="+a.reserve_data.dealerType+"&reserveType="+a.reserve_data.reserveType+"&businessCode="+a.reserve_data.businessCode+"&sapCode="+a.reserve_data.sapCode+"&startTime="+a.reserve_data.startTime+"&endTime="+a.reserve_data.endTime+"&token="+b.token),void f.open("reserve/reservedeatilchange/FreezeReserveAmount?dealerType="+a.reserve_data.dealerType+"&reserveType="+a.reserve_data.reserveType+"&businessCode="+a.reserve_data.businessCode+"&sapCode="+a.reserve_data.sapCode+"&startTime="+a.reserve_data.startTime+"&endTime="+a.reserve_data.endTime+"&token="+b.token))},function(a){console.log(a)})},a.findOrderDeatil=function(a){var b=$("#"+a).datagrid("getSelections");return b.length<1?void $.messager.alert("提示","请选择一条记录再操作"):void $.each(b,function(a,b){var c=b.referCode,d=c.split("|");f.open(POL_SERVER_URL+"index.html#/1300_130020?orderNo="+d[0])})},a.findBillingDeatil=function(a){var b=$("#"+a).datagrid("getSelections");return b.length<1?void $.messager.alert("提示","请选择一条记录再操作"):void $.each(b,function(a,b){var c=b.referCode,d=c.split("|");f.open(POL_SERVER_URL+"index.html#/1300_130040?billingNo="+d[1])})}}]),FolController.controller("reserveAmountDeatilChangeCtrl",["$scope","$rootScope","$timeout","ReserveService","$q","$window",function(a,b,c,d,e,f){a.istableshow=!1,c(function(){$("#ReserveDeatilWindow").panel({onBeforeOpen:function(){$("#changeAmountDataTable").attr("class","row-fluid ng-hide"),$("#freezeAmountDataTable").attr("class","row-fluid ng-hide")}});var e=$("#changeAmountDataGrid").datagrid("getPager");e.pagination({onSelectPage:function(b,c){a.reserve_deatil_data.beginNo=c*(b-1)==0?0:c*(b-1)+1,a.reserve_deatil_data.endNo=c*b,$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),d.findChangeReserveAmount(a.reserve_deatil_data,"reserve/reservedeatilchange/changedeatilreserve/query",function(a,b){$("#changeAmountDataTable").attr("class","row-fluid ng-show"),$("#changeAmountDataGrid").datagrid("loadData",a),$.messager.progress("close")},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT?$.messager.alert("提示","系统超时或请检查账号状态,如没问题请刷新页面重新操作"):$.messager.alert("提示",a.message)})}});var f=$("#freezeAmountDataGrid").datagrid("getPager");f.pagination({onSelectPage:function(b,c){a.reserve_deatil_data.beginNo=c*(b-1)==0?0:c*(b-1)+1,a.reserve_deatil_data.endNo=c*b,$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),d.findFreezeReserveAmount(a.reserve_deatil_data,"reserve/reservedeatilchange/freezedeatilreserve/query",function(a,b){$("#freezeAmountDataTable").attr("class","row-fluid ng-show"),$("#freezeAmountDataGrid").datagrid("loadData",a),$.messager.progress("close")},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT?$.messager.alert("提示","系统超时或请检查账号状态,如没问题请刷新页面重新操作"):$.messager.alert("提示",a.message)})}}),$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),d.findCodeTypeNames("reserve/reservedeatilchange/findCodeTypeNames",function(a,d){$.messager.progress("close");var e=["#deatilDealerType","#deatilBusinessCode"];c(function(){$("#deatilReserveType").combobox("loadData",b.reserveType),$("#deatilReserveType").combobox("select",b.reserveType[0].code);for(var c=0;c<a.length;c++)folUtil.isNull(a[c])||($(e[c]).combobox("loadData",a[c]),$(e[c]).combobox("select",a[c][0].code))})},function(a){$.messager.progress("close"),folUtil.isNull(a)&&$.messager.alert("提示","系统超时或请检查账号状态,如没问题请刷新页面重新操作")})}),a.findReserveDeatilChange=function(){var b=e.defer(),c=b.promise,f=!1,g=!1;return $("#startTime").datebox("getText")>$("#endTime").datebox("getText")?void $.messager.alert("提示","开始时间不能大于结束时间"):(a.reserve_deatil_data={dealerType:folUtil.getComboBoxDataById("deatilDealerType"),reserveType:folUtil.getComboBoxDataById("deatilReserveType"),sapCode:$("#deatilSapCode").textbox("getValue"),businessCode:folUtil.getComboBoxDataById("deatilBusinessCode"),startTime:$("#startTime").datebox("getValue"),endTime:$("#endTime").datebox("getValue"),beginNo:0,endNo:10},a.istableshow=!0,$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),d.findChangeReserveAmount(a.reserve_deatil_data,"reserve/reservedeatilchange/changedeatilreserve/query",function(a,c){f=!0,$("#changeAmountDataTable").attr("class","row-fluid ng-show"),$("#changeAmountDataGrid").datagrid("loadData",{total:0,rows:[]}),$("#changeAmountDataGrid").datagrid("loadData",a),g&&f&&b.resolve("success")},function(a){a.state===STATE.TIMEOUT?(console.log(a),b.reject("timeout")):b.reject("error")}),d.findFreezeReserveAmount(a.reserve_deatil_data,"reserve/reservedeatilchange/freezedeatilreserve/query",function(a,c){g=!0,$("#freezeAmountDataTable").attr("class","row-fluid ng-show"),$("#freezeAmountDataGrid").datagrid("loadData",{total:0,rows:[]}),$("#freezeAmountDataGrid").datagrid("loadData",a),g&&f&&b.resolve("success")},function(a){a.state==STATE.TIMEOUT?b.reject("timeout"):b.reject("error")}),void c.then(function(a){console.log(a),"success"==a&&$.messager.progress("close")},function(a){$.messager.progress("close"),$.messager.alert("提示","系统超时或请检查账号状态,如没问题请刷新页面重新操作")}))},a.deatilChangeResult=function(){d.getToken("services/tokens",function(b){return folUtil.isNull(a.reserve_deatil_data)?void $.messager.alert("提示","请先查询一次再导出"):(f.open("reserve/reservedeatilchange/ChangeReserveAmount?dealerType="+a.reserve_deatil_data.dealerType+"&reserveType="+a.reserve_deatil_data.reserveType+"&businessCode="+a.reserve_deatil_data.businessCode+"&sapCode="+a.reserve_deatil_data.sapCode+"&startTime="+a.reserve_deatil_data.startTime+"&endTime="+a.reserve_deatil_data.endTime+"&token="+b.token),void f.open("reserve/reservedeatilchange/FreezeReserveAmount?dealerType="+a.reserve_deatil_data.dealerType+"&reserveType="+a.reserve_deatil_data.reserveType+"&businessCode="+a.reserve_deatil_data.businessCode+"&sapCode="+a.reserve_deatil_data.sapCode+"&startTime="+a.reserve_deatil_data.startTime+"&endTime="+a.reserve_deatil_data.endTime+"&token="+b.token))},function(a){console.log(a)})},a.findOrderDeatil=function(a){var b=$("#"+a).datagrid("getSelections");return b.length<1?void $.messager.alert("提示","请选择一条记录再操作"):void $.each(b,function(a,b){var c=b.referCode,d=c.split("|");f.open(POL_SERVER_URL+"index.html#/1300_130020?orderNo="+d[0])})},a.findBillingDeatil=function(a){var b=$("#"+a).datagrid("getSelections");return b.length<1?void $.messager.alert("提示","请选择一条记录再操作"):void $.each(b,function(a,b){var c=b.referCode,d=c.split("|");f.open(POL_SERVER_URL+"index.html#/1300_130040?billingNo="+d[1])})}}]),FolController.controller("reserveMonthDeatilCtrl",["$scope","$rootScope","$timeout","ReserveService","$window",function(a,b,c,d,e){a.istableshow=!1,c(function(){var e=$("#datagrid").datagrid("getPager");e.pagination({onSelectPage:function(b,c){a.reserve_data.beginNo=c*(b-1)==0?0:c*(b-1)+1,a.reserve_data.endNo=c*b,$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),d.findReserveAmount(a.reserve_data,"reserve/reservemonthdeatil/query",function(a,b){$.messager.progress("close"),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}}),$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),d.findCodeTypeNames("reserve/reservemonthdeatil/findCodeTypeNames",function(a,d){$.messager.progress("close");var e=["#dealerType"];c(function(){$("#reserveType").combobox("loadData",b.reserveType),$("#reserveType").combobox("select",b.reserveType[0].code),folUtil.setComboBoxYearDataById("year"),folUtil.setComboBoxMonthDataById("month");for(var c=0;c<a.length;c++)folUtil.isNull(a[c])||($(e[c]).combobox("loadData",a[c]),$(e[c]).combobox("select",a[c][0].code))})},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}),a.findReserveMonthDeatil=function(){var b=folUtil.getComboBoxDataById("year")+"-"+folUtil.convertMonthToTwoPoint(folUtil.getComboBoxDataById("month"));a.reserve_data={dealerType:folUtil.getComboBoxDataById("dealerType"),reserveType:folUtil.getComboBoxDataById("reserveType"),sapCode:$("#sapCode").textbox("getValue"),dealerName:$("#dealerName").textbox("getValue"),changeTime:b,beginNo:0,endNo:10},a.istableshow=!0,$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),d.findReserveMonthDeatil(a.reserve_data,"reserve/reservemonthdeatil/query",function(a,b){$.messager.progress("close"),$("#datagrid").datagrid("loadData",{total:0,rows:[]}),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},a.monthDeatilResult=function(){d.getToken("services/tokens",function(b){return folUtil.isNull(a.reserve_data)?void $.messager.alert("提示","请先查询一次再导出"):(console.log("sapCode2:"+a.reserve_data.sapCode),void e.open("reserve/reservemonthdeatil/monthDeatilResult?dealerName="+encodeURI(encodeURI(a.reserve_data.dealerName))+"&sapCode="+a.reserve_data.sapCode+"&dealerType="+a.reserve_data.dealerType+"&reserveType="+a.reserve_data.reserveType+"&changeTime="+a.reserve_data.changeTime+"&token="+b.token))},function(a){console.log(a)})},a.findOrderDeatil=function(a){var b=$("#"+a).datagrid("getSelections");return b.length<1?void $.messager.alert("提示","请选择一条记录再操作"):b.length>1?void $.messager.alert("提示","不能选择多条记录，请选择一条记录再操作"):b[0].referType.indexOf("SAP")>-1?void $.messager.alert("提示","该条记录不能查看订单相关信息"):void $.each(b,function(a,b){var c=b.referCode,d=c.split("|");e.open(POL_SERVER_URL+"index.html#/1300_130020?orderNo="+d[0])})},a.findBillingDeatil=function(a){var b=$("#"+a).datagrid("getSelections");return b.length<1?void $.messager.alert("提示","请选择一条记录再操作"):b.length>1?void $.messager.alert("提示","不能选择多条记录，请选择一条记录再操作"):b[0].referType.indexOf("SAP")>-1?void $.messager.alert("提示","该条记录不能查看billing相关信息"):void $.each(b,function(a,b){var c=b.referCode,d=c.split("|");e.open(POL_SERVER_URL+"index.html#/1300_130040?billingNo="+d[1])})}}]),FolController.controller("reserveAmountReconcileCtrl",["$scope","$rootScope","$timeout","ReserveService","$window",function(a,b,c,d,e){function f(){c(function(){if($("#datagrid").length>0){var b=$("#datagrid").datagrid("getPager");b.pagination({onSelectPage:function(b,c){a.reserve_data.beginNo=c*(b-1)==0?0:c*(b-1)+1,a.reserve_data.endNo=c*b,$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),d.findReserveAmountReconcile(a.reserve_data,"reserve/reserveamountreconcile/query",function(a,b){$.messager.progress("close"),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}})}},PROGRESS_ACTION_TIMEOUT)}a.istableshow=!1,a.findReserveAmountReconcile=function(){a.istableshow=!0,f();var b=folUtil.getComboBoxDataById("year")+"-"+folUtil.convertMonthToTwoPoint(folUtil.getComboBoxDataById("month"));a.reserve_data={dealerType:folUtil.getComboBoxDataById("dealerType"),reserveType:folUtil.getComboBoxDataById("reserveType"),startSapCode:$("#startSapCode").textbox("getValue"),endSapCode:$("#endSapCode").textbox("getValue"),changeTime:b,year:folUtil.getComboBoxDataById("year"),month:folUtil.convertMonthToTwoPoint(folUtil.getComboBoxDataById("month")),difference:folUtil.getComboBoxDataById("difference"),beginNo:0,endNo:10},$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),d.findReserveAmountReconcile(a.reserve_data,"reserve/reserveamountreconcile/query",function(a,b){$.messager.progress("close"),$("#datagrid").datagrid("loadData",{total:0,rows:[]}),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),d.findCodeTypeNames("reserve/reserveamountreconcile/findCodeTypeNames",function(a,d){$.messager.progress("close");var e=["#dealerType"];c(function(){$("#reserveType").combobox("loadData",b.reserveType),$("#reserveType").combobox("select",b.reserveType[0].code),folUtil.setComboBoxYearDataById("year"),folUtil.setComboBoxMonthDataById("month"),folUtil.setComboBoxYesAndNoById("difference");for(var c=0;c<a.length;c++)folUtil.isNull(a[c])||($(e[c]).combobox("loadData",a[c]),$(e[c]).combobox("select",a[c][0].code))})},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))}),a.amountReconcile=function(){d.getToken("services/tokens",function(b,c){return folUtil.isNull(a.reserve_data)?void $.messager.alert("提示","请先查询一次再导出"):void e.open("reserve/reserveamountreconcile/amountReconcile?dealerType="+a.reserve_data.dealerType+"&reserveType="+a.reserve_data.reserveType+"&startSapCode="+a.reserve_data.startSapCode+"&endSapCode="+a.reserve_data.endSapCode+"&changeTime="+a.reserve_data.changeTime+"&year="+a.reserve_data.year+"&month="+a.reserve_data.month+"&difference="+a.reserve_data.difference+"&token="+b.token)},function(a){console.log(a)})}}]);