/*! web.sgm 2016-09-28 */
FolController.controller("BankBankTicketLimitVerifyControllor",["$scope","$timeout","$state","$q","BankBankTicketLimitVerifyService","CodeService",function(a,b,c,d,e,f){a.istableshow=!1,b(function(){if($("#datagrid").datagrid().datagrid("enableCellEditing"),$("#datagrid").length>0){var b=$("#datagrid").datagrid("getPager");b.pagination({onSelectPage:function(b,c){a.query_data.beginNo=c*(b-1)==0?0:c*(b-1)+1,a.query_data.endNo=c*b,$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),e.query(a.query_data,"bankBankTicketVerify/limits/query",function(a,b){$.messager.progress("close"),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}}),$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),a.query_data={auditStatus:a.auditStatus,beginNo:0,endNo:10},e.query(a.query_data,"bankBankTicketVerify/limits/query",function(a,b){$.messager.progress("close"),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}}),a.auditSuccess=function(){var b=$("#datagrid").datagrid("getChecked");if(b.length<=0)return void $.messager.alert("提示","请选择至少一条记录，再进行操作");var c=[];$.each(b,function(a,b){c.push({encryptId:b.encryptId,auditMsg:b.auditMsg,moneyDisplay:b.amount,auditStatus:b.auditStatus})}),$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),e.auditSuccess(c,"bankBankTicketVerify/limits/auditSuccess",function(b,c){$.messager.progress("close"),$.messager.alert("提示","审批成功"),e.query(a.query_data,"bankBankTicketVerify/limits/query",function(a,b){$.messager.progress("close"),$("#datagrid").datagrid("loadData",{total:0,rows:[]}),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},function(a){return $.messager.progress("close"),a.state===STATE.TIMEOUT?(console.log("timeout"),void $.messager.alert("提示","系统超时请稍后访问")):void $.messager.alert("提示","审核失败请检查原因")})},a.reject=function(){var b=$("#datagrid").datagrid("getChecked");if(b.length<=0)return void $.messager.alert("提示","请选择至少一条记录，再进行操作");var c=[];$.each(b,function(a,b){c.push({encryptId:b.encryptId,auditMsg:b.auditMsg,moneyDisplay:b.amount,auditStatus:b.auditStatus})}),$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),e.reject(c,"bankBankTicketVerify/limits/reject",function(b,c){$.messager.alert("提示","驳回成功"),e.query(a.query_data,"bankBankTicketVerify/limits/query",function(a,b){$.messager.progress("close"),$("#datagrid").datagrid("loadData",{total:0,rows:[]}),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},function(a){return $.messager.progress("close"),a.state===STATE.TIMEOUT?(console.log("timeout"),void $.messager.alert("提示","系统超时请稍后访问")):void $.messager.alert("提示","驳回失败请检查原因")})}}]),FolController.controller("BankSpecialDealerVerifyControllor",["$scope","$timeout","$state","$q","BankSpecialDealerVerifyService","CodeService",function(a,b,c,d,e,f){b(function(){if($("#datagrid").length>0){var c=$("#datagrid").datagrid("getPager");c.pagination({onSelectPage:function(b,c){a.query_data.beginNo=c*(b-1)==0?0:c*(b-1)+1,a.query_data.endNo=c*b,$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),e.query(a.query_data,"bankTicketVerify/specialDealer/querySpecialDealer",function(a,b){$.messager.progress("close"),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}})}var d=["渠道类型","品牌"];f.findCodeTypeNames(d,"code/findCodeTypeNames",function(a){$.messager.progress("close");var c=["#dealerType","#brand"];b(function(){for(var b=0;b<a.length;b++)folUtil.isNull(a[b])||($(c[b]).combobox("loadData",a[b]),$(c[b]).combobox("select",a[b][0].code))})},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}),a.query=function(){a.istableshow=!0,a.query_data={dealerType:folUtil.getComboBoxDataById("dealerType"),sapCode:$("#sapCode").textbox("getValue"),dealerName:$("#dealerName").textbox("getValue"),brand:folUtil.getComboBoxDataById("brand"),beginNo:0,endNo:10},$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),e.query(a.query_data,"bankTicketVerify/specialDealer/querySpecialDealer",function(a,b){$("#datagrid").datagrid().datagrid("enableCellEditing"),$.messager.progress("close"),$("#datagrid").datagrid("loadData",{total:0,rows:[]}),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},a.auditSuccess=function(){var b=$("#datagrid").datagrid("getChecked");return b.length<=0?void $.messager.alert("提示","请选择至少一条记录，再进行操作"):($.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),void e.auditSuccess(b,"bankTicketVerify/specialDealer/auditSuccess",function(b,c){$.messager.progress("close"),$.messager.alert("提示","审批成功"),e.query(a.query_data,"bankTicketVerify/specialDealer/querySpecialDealer",function(a,b){$("#datagrid").datagrid("loadData",{total:0,rows:[]}),$("#datagrid").datagrid("loadData",a)},function(a){a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},function(a){$.messager.progress("close"),$.messager.alert("提示","审核失败请检查原因")}))},a.reject=function(){var b=d.defer(),c=(b.promise,$("#datagrid").datagrid("getChecked"));return c.length<=0?void $.messager.alert("提示","请选择至少一条记录，再进行操作"):($.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),void e.reject(c,"bankTicketVerify/specialDealer/reject",function(b,c){$.messager.progress("close"),$.messager.alert("提示","驳回成功"),e.query(a.query_data,"bankTicketVerify/specialDealer/querySpecialDealer",function(a,b){$("#datagrid").datagrid("loadData",{total:0,rows:[]}),$("#datagrid").datagrid("loadData",a)},function(a){a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))}),$("#datagrid").datagrid("getSelections",b)},function(a){$.messager.progress("close"),$.messager.alert("提示","驳回失败请检查原因")}))}}]),FolController.controller("BankTicketDeadLineVerifyControllor",["$scope","$timeout","$state","$q","$stateParams","BankTicketDeadLineVerifyService","CodeService",function(a,b,c,d,e,f,g){var h="brand";b(function(){if($("#branddatagrid").datagrid().datagrid("enableCellEditing"),$("#specialdealerdatagrid").datagrid().datagrid("enableCellEditing"),$("#branddatagrid").length>0){var c=$("#branddatagrid").datagrid("getPager");c.pagination({onSelectPage:function(b,c){a.brand_query_data.beginNo=c*(b-1)==0?0:c*(b-1)+1,a.brand_query_data.endNo=c*b,$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),f.query(a.brand_query_data,"bankTicketVerify/deadLine/queryBrand",function(a,b){$.messager.progress("close"),$("#branddatagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}}),a.brand_query_data={auditStatus:a.auditStatus,beginNo:0,endNo:10},f.query(a.brand_query_data,"bankTicketVerify/deadLine/queryBrand",function(a,b){$.messager.progress("close"),$("#branddatagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}if($("#specialdealerdatagrid").length>0){var c=$("#specialdealerdatagrid").datagrid("getPager");c.pagination({onSelectPage:function(b,c){a.specialdealer_query_data.beginNo=c*(b-1)==0?0:c*(b-1)+1,a.specialdealer_query_data.endNo=c*b,$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),f.query(a.specialdealer_query_data,"bankTicketVerify/deadLine/querySpecialDealer",function(a,b){$.messager.progress("close"),$("#specialdealerdatagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}})}$(".sgm_tabs").tabs({onSelect:function(c){if("审核特殊经销商"==c){h="specialDealer",$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT});var d=["渠道类型","品牌"];g.findCodeTypeNames(d,"code/findCodeTypeNames",function(a){$.messager.progress("close");var c=["#dealerType","#brand"];b(function(){for(var b=0;b<a.length;b++)folUtil.isNull(a[b])||($(c[b]).combobox("loadData",a[b]),$(c[b]).combobox("select",a[b][0].code))})},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))}),a.specialdealer_query_data={dealerType:folUtil.getComboBoxDataById("dealerType"),sapCode:$("#sapCode").textbox("getValue"),dealerName:$("#dealerName").textbox("getValue"),brandId:folUtil.getComboBoxDataById("brand"),beginNo:0,endNo:10},f.query(a.specialdealer_query_data,"bankTicketVerify/deadLine/querySpecialDealer",function(a,b){$("#specialdealerdatagrid").datagrid("loadData",{total:0,rows:[]}),$("#specialdealerdatagrid").datagrid("loadData",a)},function(a){a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}else h="brand",a.brand_query_data={beginNo:0,endNo:10},$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),f.query(a.brand_query_data,"bankTicketVerify/deadLine/queryBrand",function(a,b){$.messager.progress("close"),$("#branddatagrid").datagrid("loadData",{total:0,rows:[]}),$("#branddatagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}})}),a.auditSuccessBrand=function(){var b=$("#branddatagrid").datagrid("getChecked");return b.length<=0?void $.messager.alert("提示","请选择至少选择一条记录，再进行操作"):($.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),void f.auditSuccess(b,"bankTicketVerify/deadLine/auditSuccess",function(b,c){$.messager.progress("close"),$.messager.alert("提示","审批成功"),f.query(a.brand_query_data,"bankTicketVerify/deadLine/queryBrand",function(a,b){$.messager.progress("close"),$("#branddatagrid").datagrid("loadData",{total:0,rows:[]}),$("#branddatagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},function(a){$.messager.progress("close"),$.messager.alert("提示","审核失败请检查原因")}))},a.rejectBrand=function(){var b=$("#branddatagrid").datagrid("getChecked");return b.length<=0?void $.messager.alert("提示","请选择至少一条记录，再进行操作"):($.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),void f.reject(b,"bankTicketVerify/deadLine/reject",function(b,c){$.messager.alert("提示","驳回成功"),f.query(a.brand_query_data,"bankTicketVerify/deadLine/queryBrand",function(a,b){$.messager.progress("close"),$("#branddatagrid").datagrid("loadData",{total:0,rows:[]}),$("#branddatagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},function(a){$.messager.progress("close"),$.messager.alert("提示","驳回失败请检查原因")}))},a.query=function(){a.istableshow=!0,a.brand_query_data={dealerType:folUtil.getComboBoxDataById("dealerType"),sapCode:$("#sapCode").textbox("getValue"),dealerName:$("#dealerName").textbox("getValue"),brandId:folUtil.getComboBoxDataById("brand"),beginNo:0,endNo:10},$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),f.query(a.brand_query_data,"bankTicketVerify/deadLine/querySpecialDealer",function(a,b){$.messager.progress("close"),$("#specialdealerdatagrid").datagrid("loadData",{total:0,rows:[]}),$("#specialdealerdatagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},a.auditSuccess=function(){var b=$("#specialdealerdatagrid").datagrid("getChecked");return b.length<=0?void $.messager.alert("提示","请选择至少一条记录，再进行操作"):($.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),void f.auditSuccess(b,"bankTicketVerify/deadLine/auditSuccess",function(b,c){$.messager.progress("close"),$.messager.alert("提示","审批成功"),f.query(a.specialdealer_query_data,"bankTicketVerify/deadLine/querySpecialDealer",function(a,b){$("#specialdealerdatagrid").datagrid("loadData",{total:0,rows:[]}),$("#specialdealerdatagrid").datagrid("loadData",a)},function(a){a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},function(a){$.messager.progress("close"),$.messager.alert("提示","审核失败请检查原因")}))},a.reject=function(){var b=$("#specialdealerdatagrid").datagrid("getChecked");return b.length<=0?void $.messager.alert("提示","请选择至少一条记录，再进行操作"):($.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),void f.reject(b,"bankTicketVerify/deadLine/reject",function(b,c){$.messager.progress("close"),$.messager.alert("提示","驳回成功"),f.query(a.specialdealer_query_data,"bankTicketVerify/deadLine/querySpecialDealer",function(a,b){$("#specialdealerdatagrid").datagrid("loadData",{total:0,rows:[]}),$("#specialdealerdatagrid").datagrid("loadData",a)},function(a){a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},function(a){$.messager.progress("close"),$.messager.alert("提示","驳回失败请检查原因")}))}}]),FolController.controller("BankTicketLimitVerifyControllor",["$scope","$timeout","$state","$q","BankTicketLimitService","CodeService",function(a,b,c,d,e,f){var g="brand";b(function(){if($("#branddatagrid").datagrid().datagrid("enableCellEditing"),$("#specialdealerdatagrid").datagrid().datagrid("enableCellEditing"),$("#branddatagrid").length>0){var c=$("#branddatagrid").datagrid("getPager");c.pagination({onSelectPage:function(b,c){a.query_data.beginNo=c*(b-1)==0?0:c*(b-1)+1,a.query_data.endNo=c*b,$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),e.query(a.query_data,"bankTicketLimitAmountVerify/limits/queryBrand",function(a,b){$.messager.progress("close"),$("#branddatagrid").datagrid("loadData",a)},function(a,b){$.messager.progress("close"),b.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问")),console.log("error:"+a)})}}),a.query_data={auditStatus:a.auditStatus,beginNo:0,endNo:10},$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),e.query(a.query_data,"bankTicketLimitAmountVerify/limits/queryBrand",function(a,b){$.messager.progress("close"),$("#branddatagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}if($("#specialdealerdatagrid").length>0){var c=$("#specialdealerdatagrid").datagrid("getPager");c.pagination({onSelectPage:function(b,c){a.query_data.beginNo=c*(b-1)==0?0:c*(b-1)+1,a.query_data.endNo=c*b,$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),e.query(a.query_data,"bankTicketLimitAmountVerify/limits/querySpecialDealer",function(a,b){$.messager.progress("close"),$("#specialdealerdatagrid").datagrid("loadData",a)},function(a,b){$.messager.progress("close"),b.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问")),console.log("error:"+a)})}})}$(".sgm_tabs").tabs({onSelect:function(c){if("审核特殊经销商"==c){g="specialDealer",$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT});var d=["渠道类型","品牌"];f.findCodeTypeNames(d,"code/findCodeTypeNames",function(a){$.messager.progress("close");var c=["#dealerType","#brand"];b(function(){for(var b=0;b<a.length;b++)folUtil.isNull(a[b])||($(c[b]).combobox("loadData",a[b]),$(c[b]).combobox("select",a[b][0].code))})},function(a,b){$.messager.progress("close"),b.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问")),console.log("error:"+a)}),e.query(a.query_data,"bankTicketLimitAmountVerify/limits/querySpecialDealer",function(a,b){$.messager.progress("close"),$("#specialdealerdatagrid").datagrid("loadData",{total:0,rows:[]}),$("#specialdealerdatagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}else g="brand",$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),a.query_data={beginNo:0,endNo:10},e.query(a.query_data,"bankTicketLimitAmountVerify/limits/queryBrand",function(a,b){$.messager.progress("close"),$("#branddatagrid").datagrid("loadData",{total:0,rows:[]}),$("#branddatagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}})}),a.auditSuccessBrand=function(){var b=$("#branddatagrid").datagrid("getChecked");return b.length<=0?void $.messager.alert("提示","请选择至少一条记录，再进行操作"):($.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),void e.auditSuccess(b,"bankTicketLimitAmountVerify/limits/auditSuccess",function(b,c){$.messager.progress("close"),$.messager.alert("提示","审核成功"),e.query(a.query_data,"bankTicketLimitAmountVerify/limits/queryBrand",function(a,b){$.messager.progress("close"),$("#branddatagrid").datagrid("loadData",{total:0,rows:[]}),$("#branddatagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},function(a){$.messager.progress("close"),$.messager.alert("提示","审核失败请检查原因")}))},a.rejectBrand=function(){var b=$("#branddatagrid").datagrid("getChecked");return b.length<=0?void $.messager.alert("提示","请选择至少一条记录，再进行操作"):($.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),void e.reject(b,"bankTicketLimitAmountVerify/limits/reject",function(b,c){$.messager.progress("close"),$.messager.alert("提示","驳回成功"),e.query(a.query_data,"bankTicketLimitAmountVerify/limits/queryBrand",function(a,b){$.messager.progress("close"),$("#branddatagrid").datagrid("loadData",{total:0,rows:[]}),$("#branddatagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},function(a){$.messager.progress("close"),$.messager.alert("提示","驳回失败请检查原因")}))},a.find=function(){a.istableshow=!0,a.query_data={dealerType:folUtil.getComboBoxDataById("dealerType"),sapCode:$("#sapCode").textbox("getValue"),dealerName:$("#dealerName").textbox("getValue"),brandId:folUtil.getComboBoxDataById("brand"),beginNo:0,endNo:10},$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),e.query(a.query_data,"bankTicketLimitAmountVerify/limits/querySpecialDealer",function(a,b){$.messager.progress("close"),$("#specialdealerdatagrid").datagrid("loadData",{total:0,rows:[]}),$("#specialdealerdatagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},a.auditSuccess=function(){var b=$("#specialdealerdatagrid").datagrid("getChecked");return b.length<=0?void $.messager.alert("提示","请选择至少一条记录，再进行操作"):($.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),void e.auditSuccess(b,"bankTicketLimitAmountVerify/limits/auditSuccess",function(b,c){$.messager.progress("close"),$.messager.alert("提示","审核成功"),e.query(a.query_data,"bankTicketLimitAmountVerify/limits/querySpecialDealer",function(a,b){$.messager.progress("close"),$("#specialdealerdatagrid").datagrid("loadData",{total:0,rows:[]}),$("#specialdealerdatagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},function(a){$.messager.progress("close"),$.messager.alert("提示","审核失败请检查原因")}))},a.reject=function(){var b=$("#specialdealerdatagrid").datagrid("getChecked");return b.length<=0?void $.messager.alert("提示","请选择至少一条记录，再进行操作"):($.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),void e.reject(b,"bankTicketLimitAmountVerify/limits/reject",function(b,c){$.messager.progress("close"),$.messager.alert("提示","驳回成功"),e.query(a.query_data,"bankTicketLimitAmountVerify/limits/querySpecialDealer",function(a,b){$.messager.progress("close"),$("#specialdealerdatagrid").datagrid("loadData",{total:0,rows:[]}),$("#specialdealerdatagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},function(a){$.messager.progress("close"),$.messager.alert("提示","驳回失败请检查原因")}))}}]),FolController.controller("TicketInterestRateAuditController",["$scope","$timeout","$state","$q","TicketInterestRateAuditService",function(a,b,c,d,e){a.istableshow=!1,b(function(){if($("#datagrid").datagrid().datagrid("enableCellEditing"),$("#datagrid").length>0){var b=$("#datagrid").datagrid("getPager");b.pagination({onSelectPage:function(b,c){a.query_data.beginNo=c*(b-1)==0?0:c*(b-1)+1,a.query_data.endNo=c*b,$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),e.query(a.query_data,"interestRate/audit/query",function(a,b){$.messager.progress("close"),$("#datagrid").datagrid("loadData",{total:0,rows:[]}),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}}),$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),a.query_data={auditStatus:a.auditStatus,beginNo:0,endNo:10},e.query(a.query_data,"interestRate/audit/query",function(a,b){$.messager.progress("close"),$("#datagrid").datagrid("loadData",{total:0,rows:[]}),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}}),a.auditSuccess=function(){var b=$("#datagrid").datagrid("getChecked");if(b.length<=0)return void $.messager.alert("提示","请选择至少一条记录，再进行操作");var c=[];$.each(b,function(a,b){c.push({auditMsg:b.auditMsg,auditStatus:b.auditStatus})}),$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),a.query_data={auditStatus:a.auditStatus,beginNo:0,endNo:10},e.auditSuccess(c,"interestRate/audit/auditSuccess",function(b,c){$.messager.alert("提示","审批成功"),e.query(a.query_data,"interestRate/audit/query",function(a,b){$.messager.progress("close"),$("#datagrid").datagrid("loadData",{total:0,rows:[]}),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},function(a){return $.messager.progress("close"),a.state===STATE.TIMEOUT?(console.log("timeout"),void $.messager.alert("提示","系统超时请稍后访问")):void $.messager.alert("提示","审核失败请检查原因")})},a.reject=function(){var b=$("#datagrid").datagrid("getChecked");if(b.length<=0)return void $.messager.alert("提示","请选择至少一条记录，再进行操作");var c=[];$.each(b,function(a,b){c.push({encryptId:b.encryptId,auditMsg:b.auditMsg,moneyDisplay:b.amount,auditStatus:b.auditStatus})}),$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),a.query_data={auditStatus:a.auditStatus,beginNo:0,endNo:10},e.reject(c,"interestRate/audit/reject",function(b,c){$.messager.alert("提示","驳回成功"),e.query(a.query_data,"interestRate/audit/query",function(a,b){$.messager.progress("close"),$("#datagrid").datagrid("loadData",{total:0,rows:[]}),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},function(a){return $.messager.progress("close"),a.state===STATE.TIMEOUT?(console.log("timeout"),void $.messager.alert("提示","系统超时请稍后访问")):void $.messager.alert("提示","驳回失败请检查原因")})}}]);