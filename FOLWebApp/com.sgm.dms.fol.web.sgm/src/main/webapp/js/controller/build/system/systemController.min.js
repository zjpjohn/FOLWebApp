/*! web.sgm 2016-09-28 */
FolController.controller("authorityCtrl",["$scope","$rootScope","$http","$state","$timeout","AuthorityService",function(a,b,c,d,e,f){a.istableshow=!1,f.systemRoRiMainss("authority/authorityamount/code/type/1071",function(a){e(function(){console.log(a),$("#roleType").combobox("loadData",a),$("#roleType").combobox("select",a[0].code)})},function(a){console.log("error:"+a)});var g=function(b,c){a.istableshow=!0;var d={roleType:folUtil.getComboBoxDataById("roleType"),beginNo:(b-1)*c,endNo:b*c+1};$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),f.systemRoRiMain(d,"authority/authorityamount/query",function(a){$.messager.progress("close"),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),console.log(a)})};a.systemRoRiMain=function(){g(1,10),$("#datagrid").datagrid("getPager").pagination({onSelectPage:function(a,b){g(a,b)}})},a.delsystem=function(){var a=$("#datagrid").datagrid("getSelected");a?confirm("确定删除吗?")&&f.delsystem(a,"authority/authorityamount/delAuthority",function(a){alert("删除成功"),$("#datagrid").datagrid("loadData",{total:0,rows:[]}),g(1,10)},function(a){alert("删除失败"),console.log(a)}):alert("请选择一条记录")},a.systemRoRiMains=function(){var a=$("#datagrid").datagrid("getSelected");a?(f.setRoleData(a),d.go("systemRoRiMains")):alert("请选择一条记录")},a.updateRoleAuthority=function(){var a=$("#datagrid").datagrid("getSelected");a?(f.setRoleData(a),d.go("updateRoleAuthority")):alert("请选择一条记录")},a.systemRoRiMainsAd=function(){d.go("systemRoRiMainsAdd")}}]),FolController.controller("authorityUpdateCtrl",["$scope","$state","$timeout","AuthorityService",function(a,b,c,d){c(function(){$("#roleId").textbox("setValue",d.getRoleData().roleId),$("#roleName").textbox("setValue",d.getRoleData().roleName),$("#roleDesc").textbox("setValue",d.getRoleData().roleDesc)}),d.systemRoRiMainss("authority/authorityamount/code/type/1071",function(a){c(function(){$("#roleType").combobox("loadData",a),$("#roleType").combobox("select",d.getRoleData().roleType)})},function(a){console.log("error:"+a)}),$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),$("#roleType").combobox({onChange:function(a,b){var c=$("#roleType").combobox("getValue");""!=c?d.findMenu("","authority/authorityamount/Menuquery/type/"+c+"/role/"+d.getRoleData().roleId,function(a){$.messager.progress("close"),$("#roledatagrid").datagrid({data:a,onLoadSuccess:function(a){a&&$.each(a.rows,function(a,b){b.checked&&$("#roledatagrid").datagrid("checkRow",a)})}})},function(a){console.log(a)}):$("#roledatagrid").datagrid("loadData",[])}}),a.systemPoRoMainA=function(){if(null==$("#roleName").textbox("getValue")||""==$("#roleName").textbox("getValue")||$("#roleName").textbox("getValue")<0)return void alert("请填写角色名称");if(null==$("#roleType").combobox("getValue")||""==$("#roleType").combobox("getValue")||$("#roleType").combobox("getValue")<0)return void alert("请选择角色类型");var a={roleId:$("#roleId").textbox("getValue"),roleName:$("#roleName").textbox("getValue"),roleType:folUtil.getComboBoxDataById("roleType"),roleDesc:$("#roleDesc").textbox("getValue")},c="",e=$("#roledatagrid").datagrid("getChecked");e.length>0&&($.each(e,function(a,b){c=c+b.menuId+","}),c+=" ",c=c.replace(", ","")),a.menuId=c,d.checkdata(a,"authority/authorityamount/getSign",function(c,e){d.systemPoRoMainA(a,"authority/authorityamount/update",function(a){alert("修改成功"),b.go("systemRoRiMain")},function(a){alert("修改失败"),console.log(a)})},function(a){a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}}]),FolController.controller("roleAuthorityUpdateCtrl",["$scope","$state","$timeout","AuthorityService",function(a,b,c,d){c(function(){$("#roleId").textbox("setValue",d.getRoleData().roleId),$("#roleName").textbox("setValue",d.getRoleData().roleName),$("#roleDesc").textbox("setValue",d.getRoleData().roleDesc)}),d.systemRoRiMainss("authority/authorityamount/code/type/1071",function(a){c(function(){$("#roleType").combobox("loadData",a),$("#roleType").combobox("select",d.getRoleData().roleType)})},function(a){console.log("error:"+a)}),$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),$("#roleType").combobox({onChange:function(a,b){var c=$("#roleType").combobox("getValue");""!=c?d.findMenu("","authority/authorityamount/methodQuery/role/"+d.getRoleData().roleId,function(a){$.messager.progress("close"),$("#roledatagrid").datagrid({data:a,onLoadSuccess:function(a){a&&$.each(a.rows,function(a,b){b.checked&&$("#roledatagrid").datagrid("checkRow",a)})}})},function(a){console.log(a)}):$("#roledatagrid").datagrid("loadData",[])}}),a.systemPoRoMainA=function(){if(null==$("#roleName").textbox("getValue")||""==$("#roleName").textbox("getValue")||$("#roleName").textbox("getValue")<0)return void alert("请填写角色名称");if(null==$("#roleType").combobox("getValue")||""==$("#roleType").combobox("getValue")||$("#roleType").combobox("getValue")<0)return void alert("请选择角色类型");var a={roleId:$("#roleId").textbox("getValue"),roleName:$("#roleName").textbox("getValue"),roleType:folUtil.getComboBoxDataById("roleType"),roleDesc:$("#roleDesc").textbox("getValue")},c="",e=$("#roledatagrid").datagrid("getChecked");e.length>0&&($.each(e,function(a,b){c=c+b.methodId+","}),c+=" ",c=c.replace(", ","")),a.methodId=c,d.systemPoRoMainA(a,"authority/authorityamount/updateAuthorityMethod",function(a){alert("修改成功"),b.go("systemRoRiMain")},function(a){alert("修改失败"),console.log(a)})}}]),FolController.controller("authorityAddCtrl",["$scope","$http","$state","$timeout","AuthorityService",function(a,b,c,d,e){e.systemRoRiMainss("authority/authorityamount/code/type/1071",function(a){d(function(){$("#roleType").combobox("loadData",a),$("#roleType").combobox("select",a[0].code)})},function(a){console.log("error:"+a)}),$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),$("#roleType").combobox({onChange:function(a,b){var c=$("#roleType").combobox("getValue");""!=c?e.findMenu("","authority/authorityamount/Menuquery/type/"+c,function(a){$.messager.progress("close"),$("#roledatagrid").datagrid("loadData",a)},function(a){console.log(a)}):$("#roledatagrid").datagrid("loadData",[])}}),a.systemPoRoMainAdd=function(){return null==$("#roleName").textbox("getValue")||""==$("#roleName").textbox("getValue")||$("#roleName").textbox("getValue")<0?void $.messager.alert("提示","请填写角色名称"):null==$("#roleType").combobox("getValue")||""==$("#roleType").combobox("getValue")||$("#roleType").combobox("getValue")<0?void $.messager.alert("提示","请选择角色类型"):void e.get("authority/authorityamount/name/"+$("#roleName").textbox("getValue"),function(a){0==a[0]?f():$.messager.alert("提示","角色已存在,不能新增")},function(a){$.messager.alert("提示","新增失败"),console.log(a)})};var f=function(){var a={roleName:$("#roleName").textbox("getValue"),roleType:folUtil.getComboBoxDataById("roleType"),roleDesc:$("#roleDesc").textbox("getValue")},b="",d=$("#roledatagrid").datagrid("getChecked");d.length>0&&($.each(d,function(a,c){b=b+c.menuId+","}),b+=" ",b=b.replace(", ","")),a.menuId=b,e.checkdata(a,"authority/authorityamount/getSign",function(b,d){e.systemPoRoMainA(a,"authority/authorityamount/roleAdd",function(a){$.messager.alert("提示","新增成功"),c.go("systemRoRiMain")},function(a){$.messager.alert("提示","新增失败"),console.log(a)})},function(a){a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}}]),FolController.controller("PersonRoleCtrl",["$scope","$state","$timeout","PersonRoleService",function(a,b,c,d){a.istableshow=!1,d.get("authority/authorityamount/code/type/1001",function(a){c(function(){$("#userStatus").combobox("loadData",a),$("#userStatus").combobox("select",a[0].code)})},function(a){console.log("error:"+a)}),d.get("system/systemamount/type/1|2",function(a){c(function(){a.unshift({positionId:"",positionName:"请选择"}),$("#positionId").combobox("loadData",a),$("#positionId").combobox("select",a[0].positionId)})},function(a){console.log("error:"+a)});var e=function(b,c){a.istableshow=!0;var e={userName:$("#userName").textbox("getValue"),userAccount:$("#userAccount").textbox("getValue"),userStatus:folUtil.getComboBoxDataById("userStatus"),positionId:folUtil.getComboBoxDataById("positionId"),beginNo:(b-1)*c,endNo:b*c+1};$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),d.post(e,"common/users/query",function(a){$.messager.progress("close"),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),console.log(a)})};a.findPersonRole=function(){e(1,10),$("#datagrid").datagrid("getPager").pagination({onSelectPage:function(a,b){e(a,b)}})},a.updataPersonRoles=function(){var a=$("#datagrid").datagrid("getSelected");a?(d.setPersonData(a),b.go("updataPersonRole")):alert("请选择一条记录")},a.userAdd=function(){b.go("userAdd")},a.delUser=function(){var a=$("#datagrid").datagrid("getSelected");a?confirm("确定删除吗?")&&d.del(a,"common/users/delete",function(a){alert("删除成功"),e(1,10)},function(a){alert("删除失败"),console.log(a)}):alert("请选择一条记录")}}]),FolController.controller("updataPersonRoleCtrl",["$scope","$state","$stateParams","$timeout","PersonRoleService",function(a,b,c,d,e){d(function(){$("#birthday").datebox("setValue",e.getPersonData().birthday),$("#userAccount").textbox("setValue",e.getPersonData().userAccount),$("#userName").textbox("setValue",e.getPersonData().userName),$("#handPhone").textbox("setValue",e.getPersonData().handPhone),$("#zipCode").textbox("setValue",e.getPersonData().zipCode),$("#addr").textbox("setValue",e.getPersonData().addr),$("#email").textbox("setValue",e.getPersonData().email)}),$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),$("#userType").combobox({onChange:function(a,b){var c=$("#userType").combobox("getValue");""!=c?e.get("system/systemamount/type/"+c+"/user/"+e.getPersonData().userAccount,function(a){d(function(){$.messager.progress("close"),$("#grid_positions").datagrid({data:a[0],onLoadSuccess:function(a){a&&$.each(a.rows,function(a,b){b.checked&&$("#grid_positions").datagrid("checkRow",a)})}})})},function(a){console.log(a)}):$("#grid_positions").datagrid("loadData",[])}}),e.get("authority/authorityamount/code/type/1001",function(a){d(function(){$("#userStatus").combobox("loadData",a),$("#userStatus").combobox("select",e.getPersonData().userStatus)})},function(a){console.log("error:"+a)}),e.get("authority/authorityamount/code/type/1012",function(a){d(function(){$("#gender").combobox("loadData",a),$("#gender").combobox("select",e.getPersonData().gender)})},function(a){console.log("error:"+a)}),e.get("authority/authorityamount/code/type/1071",function(a){d(function(){$("#userType").combobox("loadData",a),$("#userType").combobox("select",e.getPersonData().userType)})},function(a){console.log("error:"+a)}),a.userUpdate=function(){if(null==$("#userAccount").textbox("getValue")||""==$("#userAccount").textbox("getValue")||$("#userAccount").textbox("getValue")<0)return void alert("请填写帐号名");if(null==$("#userType").combobox("getValue")||""==$("#userType").combobox("getValue")||0==$("#userType").combobox("getValue"))return void alert("请选择用户类型");if(null==$("#userName").textbox("getValue")||""==$("#userName").textbox("getValue")||$("#userName").textbox("getValue")<0)return void alert("请填写姓名");if(null==$("#gender").combobox("getValue")||""==$("#gender").combobox("getValue")||0==$("#gender").combobox("getValue"))return void alert("请选择性别");if(null==$("#userStatus").combobox("getValue")||""==$("#userStatus").combobox("getValue")||0==$("#userStatus").combobox("getValue"))return void alert("请选择启用状态");var a=/^1\d{10}$/;if(!folUtil.isNull($("#handPhone").textbox("getValue"))&&!a.test($("#handPhone").textbox("getValue")))return void alert("请正确填写手机号！");var a=/[a-zA-Z0-9]{1,10}@[a-zA-Z0-9]{1,5}\.[a-zA-Z0-9]{1,5}/;if(!folUtil.isNull($("#email").textbox("getValue"))&&!a.test($("#email").textbox("getValue")))return void alert("请正确填写邮箱！");var c={userAccount:$("#userAccount").textbox("getValue"),userType:folUtil.getComboBoxDataById("userType"),userName:$("#userName").textbox("getValue"),gender:folUtil.getComboBoxDataById("gender"),handPhone:$("#handPhone").textbox("getValue"),birthday:$("#birthday").textbox("getValue"),zipCode:$("#zipCode").textbox("getValue"),addr:$("#addr").textbox("getValue"),email:$("#email").textbox("getValue"),userStatus:folUtil.getComboBoxDataById("userStatus")},d="",f=$("#grid_positions").datagrid("getChecked");f.length>0&&($.each(f,function(a,b){d=d+b.positionId+","}),d+=" ",d=d.replace(", ","")),c.positions=d,e.checkdata(c,"common/users/getSign",function(a,d){e.put(c,"common/users/update",function(a){alert("修改成功"),b.go("personRole")},function(a){a.state===STATE.TIMEOUT?(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问")):alert("修改失败"),console.log(a)})},function(a){a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}}]),FolController.controller("addUserCtrl",["$scope","$state","$stateParams","$timeout","PersonRoleService","AuthorityService",function(a,b,c,d,e,f){e.get("authority/authorityamount/code/type/1001",function(a){d(function(){$("#userStatus").combobox("loadData",a),$("#userStatus").combobox("select",a[1].code)})},function(a){console.log("error:"+a)}),$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),e.get("authority/authorityamount/code/type/1012",function(a){d(function(){$.messager.progress("close"),$("#gender").combobox("loadData",a),$("#gender").combobox("select",a[0].code)})},function(a){console.log("error:"+a)}),e.get("authority/authorityamount/code/type/1071",function(a){d(function(){$("#userType").combobox("loadData",a),$("#userType").combobox("select",a[1].code)})},function(a){console.log("error:"+a)}),$("#userType").combobox({onChange:function(a,b){var c=$("#userType").combobox("getValue");""!=c?e.get("system/systemamount/type/"+c,function(a){$("#grid_positions").datagrid("loadData",a)},function(a){console.log(a)}):$("#grid_positions").datagrid("loadData",[])}}),a.checkUser=function(){},a.userAdd=function(){if(null==$("#userAccount").textbox("getValue")||""==$("#userAccount").textbox("getValue")||$("#userAccount").textbox("getValue")<0)return void alert("请填写帐号名");if(null==$("#userType").combobox("getValue")||""==$("#userType").combobox("getValue")||0==$("#userType").combobox("getValue"))return void alert("请选择用户类型");if(null==$("#userName").textbox("getValue")||""==$("#userName").textbox("getValue")||$("#userName").textbox("getValue")<0)return void alert("请填写姓名");if(null==$("#gender").combobox("getValue")||""==$("#gender").combobox("getValue")||0==$("#gender").combobox("getValue")||-1==$("#gender").combobox("getValue"))return void alert("请选择性别");if(null==$("#userStatus").combobox("getValue")||""==$("#userStatus").combobox("getValue")||0==$("#userStatus").combobox("getValue"))return void alert("请选择启用状态");var a=/^1\d{10}$/;if(!folUtil.isNull($("#handPhone").textbox("getValue"))&&!a.test($("#handPhone").textbox("getValue")))return void alert("请正确填写手机号！");var a=/[a-zA-Z0-9]{1,10}@[a-zA-Z0-9]{1,5}\.[a-zA-Z0-9]{1,5}/;return folUtil.isNull($("#email").textbox("getValue"))||a.test($("#email").textbox("getValue"))?void e.get("common/users/account/"+$("#userAccount").textbox("getValue"),function(a){0==a[0]?g():alert("帐号已存在,不能新增")},function(a){alert("新增失败"),console.log(a)}):void alert("请正确填写邮箱！")};var g=function(){var a={userAccount:$("#userAccount").textbox("getValue"),userType:folUtil.getComboBoxDataById("userType"),userName:$("#userName").textbox("getValue"),gender:folUtil.getComboBoxDataById("gender"),handPhone:$("#handPhone").textbox("getValue"),birthday:$("#birthday").textbox("getValue"),zipCode:$("#zipCode").textbox("getValue"),addr:$("#addr").textbox("getValue"),email:$("#email").textbox("getValue"),userStatus:folUtil.getComboBoxDataById("userStatus")},c="",d=$("#grid_positions").datagrid("getChecked");d.length>0&&($.each(d,function(a,b){c=c+b.positionId+","}),c+=" ",c=c.replace(", ","")),a.positions=c,f.checkdata(a,"common/users/getSign",function(c,d){e.post(a,"common/users/add",function(a){alert("新增成功"),b.go("personRole")},function(a){alert("新增失败"),console.log(a)})},function(a){a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}}]),FolController.controller("systemCtrl",["$scope","$state","SystemService",function(a,b,c){a.istableshow=!1;var d=function(b,d){a.istableshow=!0;var e={positionName:$("#positionName").textbox("getValue"),dpPositionCode:$("#dpPositionCode").textbox("getValue"),beginNo:(b-1)*d,endNo:b*d+1};$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),c.systemPoRoMain(e,"system/systemamount/query",function(a){$.messager.progress("close"),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),console.log(a)})};a.systemPoRoMain=function(){d(1,10),$("#datagrid").datagrid("getPager").pagination({onSelectPage:function(a,b){d(a,b)}})},a.systemPoRoMains=function(){var a=$("#datagrid").datagrid("getSelected");a?(c.setPositionData(a),b.go("systemPoRoMains")):alert("请选择一条记录")},a.systemPoRoAdd=function(){b.go("systemPoRoMainsAdd")},a.systemPoRoDel=function(){var a=$("#datagrid").datagrid("getSelected");a?confirm("确定删除吗?")&&c.del(a,"system/systemamount/del",function(a){alert("删除成功"),d(1,10)},function(a){alert("删除失败"),console.log(a)}):alert("请选择一条记录")}}]),FolController.controller("systemUpdateCtrl",["$scope","$state","$timeout","$stateParams","SystemService",function(a,b,c,d,e){c(function(){$("#positionId").textbox("setValue",e.getPositionData().positionId),$("#positionName").textbox("setValue",e.getPositionData().positionName),$("#positionDesc").textbox("setValue",e.getPositionData().positionDesc),$("#dpPositionCode").textbox("setValue",e.getPositionData().dpPositionCode)}),e.get("authority/authorityamount/code/type/1071",function(a){c(function(){$("#positionType").combobox("loadData",a),$("#positionType").combobox("select",e.getPositionData().positionType)})},function(a){console.log("error:"+a)}),$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),$("#positionType").combobox({onChange:function(a,b){var c=$("#positionType").combobox("getValue");""!=c?e.get("authority/authorityamount/type/"+c+"/position/"+e.getPositionData().positionId,function(a){$.messager.progress("close"),$("#roledatagrid").datagrid("loadData",a),$("#roledatagrid").datagrid({data:a,onLoadSuccess:function(a){a&&$.each(a.rows,function(a,b){b.checked&&$("#roledatagrid").datagrid("checkRow",a)})}})},function(a){console.log(a)}):$("#roledatagrid").datagrid("loadData",[])}}),a.systemPoRoMainA=function(){if(null==$("#positionName").textbox("getValue")||""==$("#positionName").textbox("getValue")||$("#positionName").textbox("getValue")<0)return void alert("请填写岗位名称");if(null==$("#positionType").combobox("getValue")||""==$("#positionType").combobox("getValue")||$("#positionType").combobox("getValue")<0)return void alert("请选择岗位类型");var a={positionName:$("#positionName").textbox("getValue"),positionId:$("#positionId").textbox("getValue"),positionType:folUtil.getComboBoxDataById("positionType"),positionDesc:$("#positionDesc").textbox("getValue"),dpPositionCode:$("#dpPositionCode").textbox("getValue")},c="",d=$("#roledatagrid").datagrid("getChecked");d.length>0&&($.each(d,function(a,b){c=c+b.roleId+","}),c+=" ",c=c.replace(", ","")),a.roles=c,e.checkdata(a,"system/systemamount/getSign",function(a,c){e.put(a,"system/systemamount/update",function(a){alert("修改成功"),b.go("systemPoRoMain")},function(a){alert("修改失败"),console.log(a)})},function(a){a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}}]),FolController.controller("systemAddCtrl",["$scope","$state","$stateParams","$timeout","SystemService","AuthorityService",function(a,b,c,d,e,f){e.get("authority/authorityamount/code/type/1071",function(a){d(function(){$("#positionType").combobox("loadData",a),$("#positionType").combobox("select",a[0].code)})},function(a){console.log("error:"+a)}),$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),$("#positionType").combobox({onChange:function(a,b){var c=$("#positionType").combobox("getValue");""!=c?e.get("authority/authorityamount/type/"+c,function(a){$.messager.progress("close"),$("#roledatagrid").datagrid("loadData",a)},function(a){console.log(a)}):$("#roledatagrid").datagrid("loadData",[])}}),a.systemPoRoMainAdd=function(){return null==$("#positionName").textbox("getValue")||""==$("#positionName").textbox("getValue")||$("#positionName").textbox("getValue")<0?void alert("请填写岗位名称"):null==$("#positionType").combobox("getValue")||""==$("#positionType").combobox("getValue")||$("#positionType").combobox("getValue")<0?void alert("请选择岗位类型"):void e.get("system/systemamount/name/"+$("#positionName").textbox("getValue"),function(a){0==a[0]?g():alert("岗位已存在,不能新增")},function(a){alert("新增失败"),console.log(a)})};var g=function(){var a={positionName:$("#positionName").textbox("getValue"),positionType:folUtil.getComboBoxDataById("positionType"),positionDesc:$("#positionDesc").textbox("getValue"),dpPositionCode:$("#dpPositionCode").textbox("getValue")},c="",d=$("#roledatagrid").datagrid("getChecked");d.length>0&&($.each(d,function(a,b){c=c+b.roleId+","}),c+=" ",c=c.replace(", ","")),a.roles=c,f.checkdata(a,"system/systemamount/getSign",function(c,d){e.post(a,"system/systemamount/add",function(a){alert("新增成功"),b.go("systemPoRoMain")},function(a){alert("新增失败"),console.log(a)})},function(a){a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}}]),FolController.controller("UserController",["$scope","UserService",function(a,b){a.doLogout=function(){b.logout("common/logout",function(a){$.messager.alert("退出已成功")},function(a){console.log(a)})}}]),FolController.controller("authorityMaintainCtrl",["$scope","$rootScope","$http","$state","$timeout","RoleAuthorityService",function(a,b,c,d,e,f){a.istableshow=!1,e(function(){var b=$("#datagrid").datagrid("getPager");b.pagination({onSelectPage:function(b,c){a.authority_data.beginNo=c*(b-1)==0?0:c*(b-1)+1,a.authority_data.endNo=c*b,$.messager.progress({title:"Please waiting",msg:"Loading data...",interval:PROGRESS_ACTION_TIMEOUT}),f.systemRoRiMain(a.authority_data,"authority/authormethod/query",function(a){$.messager.progress("close"),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})}})}),a.systemRoRiMain=function(){a.istableshow=!0,a.authority_data={clazz:$("#clazz").textbox("getValue"),beginNo:0,endNo:10},f.systemRoRiMain(a.authority_data,"authority/authormethod/query",function(a){$.messager.progress("close"),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},a.delsystem=function(){var b=$("#datagrid").datagrid("getSelected");b?confirm("确定删除吗?")&&f.delsystem(b,"authority/authormethod/delete",function(b){alert("删除成功"),a.authority_data.beginNo=0,a.authority_data.endNo=10,f.systemRoRiMain(a.authority_data,"authority/authormethod/query",function(a){$("#datagrid").datagrid("loadData",{total:0,rows:[]}),$("#datagrid").datagrid("loadData",a)},function(a){$.messager.progress("close"),a.state===STATE.TIMEOUT&&(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问"))})},function(a){alert("删除失败"),console.log(a)}):alert("请选择一条记录")},a.systemRoRiMains=function(){var a=$("#datagrid").datagrid("getSelected");a?(f.setRoleData(a),d.go("roleAuthorityMains")):alert("请选择一条记录")},a.systemRoRiMainsAd=function(){d.go("roleAuthorityMainsAdd")}}]),FolController.controller("roleAuthorityMaintainUpdateCtrl",["$scope","$state","$timeout","RoleAuthorityService",function(a,b,c,d){c(function(){$("#clazz").textbox("setValue",d.getRoleData().clazz),$("#methodId").textbox("setValue",d.getRoleData().methodId),$("#method").textbox("setValue",d.getRoleData().method),$("#url").textbox("setValue",d.getRoleData().url)}),a.systemPoRoMainA=function(){if(null==$("#clazz").textbox("getValue")||""==$("#clazz").textbox("getValue")||$("#clazz").textbox("getValue")<0)return void alert("请填写角色权限类名");if(null==$("#method").textbox("getValue")||""==$("#method").textbox("getValue")||$("#method").textbox("getValue")<0)return void alert("请填写角色权限方法名");if(null==$("#url").textbox("getValue")||""==$("#url").textbox("getValue")||$("#url").textbox("getValue")<0)return void alert("请填写角色权限URI");var a={methodId:$("#methodId").textbox("getValue"),clazz:$("#clazz").textbox("getValue"),method:$("#method").textbox("getValue"),url:$("#url").textbox("getValue")};d.systemPoRoMainA(a,"authority/authormethod/update",function(a){alert("修改成功"),b.go("roleAuthorityMain")},function(a){response_info.state===STATE.TIMEOUT?(console.log("timeout"),$.messager.alert("提示","系统超时请稍后访问")):alert("修改失败"),console.log(a)})},a.cancel=function(){b.go("roleAuthorityMain")}}]),FolController.controller("roleAuthorityMaintainAddCtrl",["$scope","$http","$state","$timeout","RoleAuthorityService",function(a,b,c,d,e){a.systemPoRoMainAdd=function(){if(null==$("#clazz").textbox("getValue")||""==$("#clazz").textbox("getValue")||$("#clazz").textbox("getValue")<0)return void alert("请填写角色权限类名");if(null==$("#method").textbox("getValue")||""==$("#method").textbox("getValue")||$("#method").textbox("getValue")<0)return void alert("请填写角色权限方法名");if(null==$("#url").textbox("getValue")||""==$("#url").textbox("getValue")||$("#url").textbox("getValue")<0)return void alert("请填写角色权限URI");var a={clazz:$("#clazz").textbox("getValue"),method:$("#method").textbox("getValue"),url:$("#url").textbox("getValue")};e.systemPoRoMainA(a,"authority/authormethod/add",function(a){$.messager.alert("提示","新增成功"),c.go("roleAuthorityMain")},function(a){$.messager.alert("提示","新增失败"),console.log(a)})},a.cancel=function(){c.go("roleAuthorityMain")}}]);